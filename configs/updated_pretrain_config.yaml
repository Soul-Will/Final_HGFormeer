# Model architecture
model:
  in_channels: 1
  base_channels: 32
  depths: [1, 2, 4, 2]
  num_hyperedges: [64, 32, 16, 8]
  K_neighbors: [128, 64, 32, 8]
  num_heads: 8
  mlp_ratio: 4.0
  dropout: 0.1

# Training hyperparameters
training:
  epochs: 100
  batch_size: 4
  learning_rate: 8.0e-4
  min_lr: 5.0e-5
  weight_decay: 0.05
  gradient_clip: 1.0
  save_freq: 10


  warmup_epochs: 10              # NEW
  scheduler_type: "cosine_with_restarts"  # NEW
  restart_epoch: 50              # NEW (optional, set to null if no restart)
  restart_multiplier: 0.5


# SSL loss weights
ssl_losses:
  lambda_inpaint: 1.2
  lambda_rotation: 0.5
  lambda_contrastive: 1.0
  lambda_label: 1.0
  mask_ratio: 0.15
  temperature: 0.10

# Data configuration
data:
  # ✅ UPDATED: Points to pre-stacked volumes
  data_dir: "data/processed/volumes_ssl"
  patch_size: [64, 128, 128]  # (D, H, W)
  num_patches_per_brain: 100  # Per epoch
  num_workers: 4
  pin_memory: true

  # ✅ Foreground sampling configuration
  foreground_sampling: true
  foreground_fraction: 0.8  # 80% foreground, 20% random
  foreground_method: "otsu"  # "otsu" | "percentile" | "fixed"
  
# Augmentation (torchio-based)
augmentation:
  use_augmentation: true
  blur_std_range: [0, 2]
  noise_std_range: [0, 0.1]
  gamma_range: [-0.3, 0.3]
  affine_scales: [0.9, 1.1]
  affine_degrees: 10
  affine_translation: 5
  elastic_num_points: 7
  elastic_max_displacement: 7.5

# Paths
paths:
  output_dir: "checkpoints/ssl"
  log_dir: "logs/ssl"